<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>GameStore</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Inter:wght@400;500;600&display=swap');
:root {
  --bg:#09090f; --bg2:#0f0f1a; --bg3:#161625; --card:#121220;
  --border:#22223a; --border2:#2e2e48;
  --accent:#7c3aed; --accent2:#a855f7; --glow:rgba(124,58,237,.28);
  --gold:#f59e0b; --green:#10b981; --red:#ef4444; --blue:#3b82f6;
  --text:#f0f0fa; --text2:#8080a0; --text3:#404060; --r:16px;
}
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;overflow-x:hidden;padding-bottom:82px}

/* ‚îÄ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ‚îÄ */
.hdr{background:rgba(9,9,15,.96);backdrop-filter:blur(18px);border-bottom:1px solid var(--border);padding:13px 16px 0;position:sticky;top:0;z-index:100}
.hdr-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:11px}
.logo{font-family:'Rajdhani',sans-serif;font-size:21px;font-weight:700;letter-spacing:3px;background:linear-gradient(90deg,#c084fc,#7c3aed);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.logo em{-webkit-text-fill-color:var(--gold);font-style:normal}
.hdr-right{display:flex;gap:8px}
.ico-btn{background:var(--bg3);border:1px solid var(--border);border-radius:11px;padding:7px 11px;font-size:17px;cursor:pointer;transition:.15s;position:relative}
.ico-btn:active{transform:scale(.9)}
.cbadge{position:absolute;top:-5px;right:-5px;background:var(--red);color:#fff;font-size:9px;font-weight:700;width:16px;height:16px;border-radius:50%;display:none;align-items:center;justify-content:center}
.cbadge.v{display:flex}
/* catalog tabs */
.htabs{display:flex;gap:6px;overflow-x:auto;scrollbar-width:none;padding-bottom:10px}
.htabs::-webkit-scrollbar{display:none}
.htab{flex-shrink:0;padding:6px 13px;background:var(--bg3);border:1px solid var(--border);border-radius:20px;font-size:12px;font-weight:500;color:var(--text2);cursor:pointer;transition:.2s;white-space:nowrap}
.htab.on{background:var(--accent);border-color:var(--accent);color:#fff;box-shadow:0 0 14px var(--glow)}

/* ‚îÄ‚îÄ‚îÄ PAGES ‚îÄ‚îÄ‚îÄ */
.page{display:none}.page.on{display:block}

/* ‚îÄ‚îÄ‚îÄ HOME ‚îÄ‚îÄ‚îÄ */
.hero{margin:14px 14px 0;background:linear-gradient(135deg,#1e0a48 0%,#0c1038 55%,#091828 100%);border:1px solid #2a185a;border-radius:20px;padding:22px 20px;position:relative;overflow:hidden}
.hero::before{content:'';position:absolute;top:-70px;right:-50px;width:220px;height:220px;background:radial-gradient(circle,rgba(124,58,237,.38),transparent 70%);border-radius:50%;pointer-events:none}
.hero-tag{display:inline-block;background:linear-gradient(90deg,#f59e0b,#f97316);color:#000;font-size:10px;font-weight:700;padding:3px 10px;border-radius:20px;margin-bottom:10px;letter-spacing:.5px}
.hero h2{font-family:'Rajdhani',sans-serif;font-size:25px;font-weight:700;line-height:1.2;margin-bottom:8px;background:linear-gradient(135deg,#fff 40%,#c4b5fd);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.hero p{font-size:12px;color:var(--text2);line-height:1.65}
.hero-chips{display:flex;gap:6px;margin-top:12px;flex-wrap:wrap}
.chip{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.12);border-radius:20px;padding:4px 10px;font-size:11px;color:var(--text2)}
.home-stats{display:flex;gap:8px;padding:14px 14px 0}
.hstat{flex:1;background:var(--card);border:1px solid var(--border);border-radius:14px;padding:12px 10px;text-align:center}
.hstat-val{font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;color:var(--accent2)}
.hstat-lbl{font-size:10px;color:var(--text2);margin-top:2px}
.hiw{margin:14px;background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:16px}
.hiw-title{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;margin-bottom:12px}
.hiw-step{display:flex;align-items:flex-start;gap:12px;margin-bottom:10px}
.hiw-step:last-child{margin-bottom:0}
.step-num{background:var(--accent);color:#fff;font-size:11px;font-weight:700;width:22px;height:22px;border-radius:50%;display:flex;align-items:center;justify-content:center;flex-shrink:0;margin-top:1px}
.step-txt{font-size:13px;line-height:1.5;color:var(--text2)}
.step-txt b{color:var(--text)}
/* featured scroll */
.feat-scroll{display:flex;gap:10px;overflow-x:auto;scrollbar-width:none;padding:0 14px}
.feat-scroll::-webkit-scrollbar{display:none}
.fc{flex-shrink:0;width:135px;background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:14px 12px;cursor:pointer;transition:.15s}
.fc:active{transform:scale(.95);border-color:var(--accent)}
.fc-emoji{font-size:30px;margin-bottom:8px;display:block}
.fc-name{font-size:12px;font-weight:600;margin-bottom:4px;line-height:1.3}
.fc-price{font-family:'Rajdhani',sans-serif;font-size:15px;font-weight:700;color:var(--accent2)}

/* ‚îÄ‚îÄ‚îÄ CATALOG ‚îÄ‚îÄ‚îÄ */
.cat-page{padding:14px}
.cat-page-title{font-family:'Rajdhani',sans-serif;font-size:20px;font-weight:700;margin-bottom:14px}
.cat-block{margin-bottom:22px}
.cat-bhead{display:flex;align-items:center;gap:8px;margin-bottom:10px}
.cat-btitle{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700}
.cat-bcnt{font-size:11px;color:var(--text2);background:var(--bg3);border:1px solid var(--border);padding:3px 9px;border-radius:20px}
.grid2{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.gcard{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:14px 12px;cursor:pointer;transition:.18s;position:relative;overflow:hidden}
.gcard:active{transform:scale(.96);border-color:var(--accent)}
.gc-emoji{font-size:34px;margin-bottom:8px;display:block}
.gc-name{font-size:13px;font-weight:600;margin-bottom:2px}
.gc-sub{font-size:11px;color:var(--text2)}
.gc-badge{position:absolute;top:9px;right:9px;font-size:9px;font-weight:700;padding:2px 7px;border-radius:20px}
.bh{background:var(--red);color:#fff}.bn{background:var(--green);color:#fff}

/* ‚îÄ‚îÄ‚îÄ ITEMS LIST ‚îÄ‚îÄ‚îÄ */
.items-page{padding:14px}
.back-btn{display:flex;align-items:center;gap:6px;width:fit-content;cursor:pointer;font-size:13px;color:var(--text2);background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:7px 12px;margin-bottom:14px;transition:.15s}
.back-btn:active{transform:scale(.95)}
.items-hdr{background:linear-gradient(135deg,var(--bg3),var(--card));border:1px solid var(--border);border-radius:var(--r);padding:18px;text-align:center;margin-bottom:14px}
.ih-emoji{font-size:52px;margin-bottom:10px;display:block;filter:drop-shadow(0 0 14px rgba(168,85,247,.35))}
.ih-name{font-family:'Rajdhani',sans-serif;font-size:22px;font-weight:700;margin-bottom:4px}
.ih-desc{font-size:13px;color:var(--text2);line-height:1.5}
.prod-list{display:flex;flex-direction:column;gap:8px}
.prow{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:13px 14px;cursor:pointer;transition:.15s}
.prow:active{background:var(--bg3)}
.prow-top{display:flex;align-items:center;gap:12px;margin-bottom:10px}
.pr-left{flex:1;min-width:0}
.pr-name{font-size:14px;font-weight:600;margin-bottom:2px}
.pr-info{font-size:11px;color:var(--text2)}
.pr-right{text-align:right;flex-shrink:0}
.pr-price{font-family:'Rajdhani',sans-serif;font-size:19px;font-weight:700}
.pr-old{font-size:10px;color:var(--text3);text-decoration:line-through}
.pr-disc{font-size:10px;color:var(--green);font-weight:600}
.prow-btns{display:flex;gap:8px}
.btn-buy{flex:1;background:linear-gradient(135deg,#7c3aed,#a855f7);border:none;border-radius:10px;padding:9px;font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;letter-spacing:.5px;color:#fff;cursor:pointer;transition:.15s}
.btn-buy:active{transform:scale(.97)}
.btn-cart{background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:9px 12px;font-size:16px;cursor:pointer;transition:.15s}
.btn-cart:active{transform:scale(.93)}
.btn-cart.added{background:rgba(16,185,129,.15);border-color:rgba(16,185,129,.4)}

/* ‚îÄ‚îÄ‚îÄ DETAIL ‚îÄ‚îÄ‚îÄ */
.det-head{background:linear-gradient(160deg,var(--bg3),var(--card));border-bottom:1px solid var(--border);padding:20px 16px 22px;text-align:center}
.det-emoji{font-size:68px;margin-bottom:12px;display:block;filter:drop-shadow(0 0 18px rgba(168,85,247,.4))}
.det-name{font-family:'Rajdhani',sans-serif;font-size:24px;font-weight:700;margin-bottom:4px}
.det-cat{font-size:13px;color:var(--text2);margin-bottom:16px}
.price-row{display:flex;align-items:center;justify-content:center;gap:10px}
.det-price{font-family:'Rajdhani',sans-serif;font-size:32px;font-weight:700;color:var(--accent2)}
.det-old{font-size:16px;color:var(--text3);text-decoration:line-through}
.det-disc{background:var(--red);color:#fff;font-size:11px;font-weight:700;padding:3px 9px;border-radius:20px}
.det-body{padding:16px 14px}
.feats{background:var(--card);border:1px solid var(--border);border-radius:var(--r);margin-bottom:12px}
.frow{display:flex;align-items:flex-start;gap:10px;padding:12px 14px;border-bottom:1px solid var(--border);font-size:13px;line-height:1.5}
.frow:last-child{border-bottom:none}
.frow .ico{font-size:17px;flex-shrink:0;margin-top:1px}
/* promo input */
.promo-block{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:14px;margin-bottom:12px}
.promo-title{font-size:13px;font-weight:600;margin-bottom:10px}
.promo-row{display:flex;gap:8px}
.promo-input{flex:1;background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:9px 12px;font-size:13px;color:var(--text);outline:none;transition:.2s;text-transform:uppercase}
.promo-input:focus{border-color:var(--accent)}
.promo-input::placeholder{color:var(--text3);text-transform:none}
.promo-apply{background:var(--accent);border:none;border-radius:10px;padding:9px 14px;color:#fff;font-size:12px;font-weight:600;cursor:pointer;flex-shrink:0;transition:.15s}
.promo-apply:active{transform:scale(.93)}
.promo-result{margin-top:8px;font-size:12px;padding:8px 10px;border-radius:8px;display:none}
.promo-ok{background:rgba(16,185,129,.12);border:1px solid rgba(16,185,129,.3);color:var(--green)}
.promo-err{background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.3);color:var(--red)}
/* pay methods */
.pay-opts{background:var(--card);border:1px solid var(--border);border-radius:var(--r);margin-bottom:12px;overflow:hidden}
.pay-title{font-size:13px;font-weight:600;padding:12px 14px;border-bottom:1px solid var(--border)}
.pay-methods{display:flex}
.pay-method{flex:1;display:flex;flex-direction:column;align-items:center;gap:5px;padding:14px 8px;cursor:pointer;transition:.15s;border-right:1px solid var(--border);font-size:12px;font-weight:500;color:var(--text2)}
.pay-method:last-child{border-right:none}
.pay-method.sel{background:rgba(124,58,237,.12);color:var(--accent2)}
.pay-method:active{transform:scale(.95)}
.pay-ico{font-size:22px}
/* final price */
.final-price{background:rgba(124,58,237,.1);border:1px solid rgba(124,58,237,.3);border-radius:12px;padding:12px 14px;margin-bottom:12px;display:flex;justify-content:space-between;align-items:center}
.fp-lbl{font-size:13px;color:var(--text2)}
.fp-val{font-family:'Rajdhani',sans-serif;font-size:22px;font-weight:700;color:var(--accent2)}
.det-btns{display:flex;gap:10px}
.buy-btn{flex:1;background:linear-gradient(135deg,#7c3aed,#a855f7);border:none;border-radius:var(--r);padding:15px;font-family:'Rajdhani',sans-serif;font-size:17px;font-weight:700;letter-spacing:1px;color:#fff;cursor:pointer;box-shadow:0 4px 22px rgba(124,58,237,.42);transition:.15s}
.buy-btn:active{transform:scale(.98)}
.cart-add-btn{background:var(--bg3);border:1px solid var(--border);border-radius:var(--r);padding:15px;font-size:22px;cursor:pointer;transition:.15s}
.cart-add-btn:active{transform:scale(.95)}
.cart-add-btn.added{background:rgba(16,185,129,.15);border-color:rgba(16,185,129,.4)}

/* ‚îÄ‚îÄ‚îÄ CART ‚îÄ‚îÄ‚îÄ */
.cart-page{padding:14px}
.cart-title{font-family:'Rajdhani',sans-serif;font-size:20px;font-weight:700;margin-bottom:14px}
.cart-empty{text-align:center;padding:60px 20px}
.cart-empty-ico{font-size:60px;opacity:.25;margin-bottom:14px}
.cart-empty p{color:var(--text2);font-size:14px}
.ci{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:13px;margin-bottom:8px}
.ci-top{display:flex;align-items:center;gap:10px;margin-bottom:10px}
.ci-emoji{font-size:26px}
.ci-info{flex:1}
.ci-name{font-size:13px;font-weight:600;margin-bottom:2px}
.ci-price{font-size:13px;color:var(--accent2);font-weight:600}
.ci-del{background:rgba(239,68,68,.12);border:1px solid rgba(239,68,68,.25);border-radius:8px;padding:7px 10px;color:var(--red);font-size:14px;cursor:pointer}
.ci-del:active{transform:scale(.9)}
.ci-btns{display:flex;gap:8px}
.ci-buy{flex:1;background:linear-gradient(135deg,#7c3aed,#a855f7);border:none;border-radius:10px;padding:9px;font-family:'Rajdhani',sans-serif;font-size:13px;font-weight:700;color:#fff;cursor:pointer;transition:.15s}
.ci-buy:active{transform:scale(.97)}
/* promo in cart */
.cart-promo{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px;margin-bottom:10px}
.cart-promo-title{font-size:13px;font-weight:600;margin-bottom:10px}
.cart-tot{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px 16px;margin:10px 0}
.ct-rows{display:flex;flex-direction:column;gap:6px}
.ct-row{display:flex;justify-content:space-between;align-items:center;font-size:13px}
.ct-lbl{color:var(--text2)}
.ct-val{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700}
.ct-total-row{display:flex;justify-content:space-between;align-items:center;border-top:1px solid var(--border);padding-top:10px;margin-top:6px}
.ct-total-lbl{font-size:14px;color:var(--text2)}
.ct-total-val{font-family:'Rajdhani',sans-serif;font-size:26px;font-weight:700;color:var(--accent2)}
.ct-disc{font-size:12px;color:var(--green);text-align:right}
.pay-info{background:rgba(16,185,129,.08);border:1px solid rgba(16,185,129,.2);border-radius:12px;padding:12px 14px;font-size:12px;color:var(--green);margin-bottom:12px;line-height:1.6}
.checkout-btn{width:100%;background:linear-gradient(135deg,#7c3aed,#a855f7);border:none;border-radius:var(--r);padding:16px;font-family:'Rajdhani',sans-serif;font-size:18px;font-weight:700;letter-spacing:1px;color:#fff;cursor:pointer;box-shadow:0 4px 22px rgba(124,58,237,.42);transition:.15s}
.checkout-btn:active{transform:scale(.98)}

/* ‚îÄ‚îÄ‚îÄ PROFILE ‚îÄ‚îÄ‚îÄ */
.prof-page{padding:14px}
.prof-card{background:linear-gradient(135deg,#1a0a38,#0a1030,#0a1820);border:1px solid #2a1a5a;border-radius:20px;padding:24px;text-align:center;margin-bottom:12px;position:relative;overflow:hidden}
.prof-card::before{content:'';position:absolute;top:-50px;left:50%;transform:translateX(-50%);width:180px;height:180px;background:radial-gradient(circle,rgba(124,58,237,.28),transparent 70%);pointer-events:none}
.prof-ava{width:66px;height:66px;border-radius:50%;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-size:27px;margin:0 auto 10px;box-shadow:0 4px 18px var(--glow)}
.prof-name{font-family:'Rajdhani',sans-serif;font-size:22px;font-weight:700;margin-bottom:8px}
.prof-status{display:inline-block;background:rgba(245,158,11,.15);border:1px solid rgba(245,158,11,.3);color:var(--gold);font-size:12px;font-weight:600;padding:4px 12px;border-radius:20px}
.stats3{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:12px}
.sbox{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:14px 8px;text-align:center}
.sb-v{font-family:'Rajdhani',sans-serif;font-size:20px;font-weight:700;color:var(--accent2)}
.sb-l{font-size:10px;color:var(--text2);margin-top:3px}
.ref-block{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:16px;margin-bottom:12px}
.ref-ttl{font-size:14px;font-weight:600;margin-bottom:6px}
.ref-desc{font-size:12px;color:var(--text2);margin-bottom:12px;line-height:1.6}
.ref-link-row{background:var(--bg3);border:1px solid var(--border);border-radius:10px;padding:11px 12px;display:flex;align-items:center;gap:10px;cursor:pointer}
.ref-link-txt{flex:1;font-size:12px;color:var(--text2);word-break:break-all}
.ref-copy{background:var(--accent);border:none;border-radius:8px;padding:7px 12px;color:#fff;font-size:12px;font-weight:600;cursor:pointer;flex-shrink:0;transition:.15s}
.ref-copy:active{transform:scale(.93)}

/* ‚îÄ‚îÄ‚îÄ BOTTOM NAV ‚îÄ‚îÄ‚îÄ */
.bnav{position:fixed;bottom:0;left:0;right:0;background:rgba(9,9,15,.97);backdrop-filter:blur(20px);border-top:1px solid var(--border);display:flex;z-index:200;padding:8px 0 18px}
.bi{flex:1;display:flex;flex-direction:column;align-items:center;gap:3px;cursor:pointer;transition:.15s}
.bi:active{transform:scale(.88)}
.bi-icon{font-size:21px}.bi-lbl{font-size:10px;color:var(--text3);font-weight:500}
.bi.on .bi-lbl{color:var(--accent2)}.bi.on .bi-icon{filter:drop-shadow(0 0 7px var(--accent2))}

/* ‚îÄ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ‚îÄ */
.toast{position:fixed;bottom:90px;left:50%;transform:translateX(-50%) translateY(14px);background:var(--green);color:#fff;padding:10px 20px;border-radius:20px;font-size:13px;font-weight:600;opacity:0;transition:.25s;z-index:999;white-space:nowrap;pointer-events:none}
.toast.v{opacity:1;transform:translateX(-50%) translateY(0)}
@keyframes fadeUp{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}
.au{animation:fadeUp .28s ease}
.sec-title{font-family:'Rajdhani',sans-serif;font-size:16px;font-weight:700;margin-bottom:10px}
.mt14{margin-top:14px}.ph14{padding:0 14px}
.empty-s{text-align:center;padding:36px 20px;color:var(--text2);font-size:14px}
</style>
</head>
<body>

<div class="hdr" id="hdr">
  <div class="hdr-top">
    <div class="logo">GAME<em>‚Ä¢</em>STORE</div>
    <div class="hdr-right">
      <div class="ico-btn" onclick="goPage('cart')">üõí<div class="cbadge" id="cbadge">0</div></div>
    </div>
  </div>
  <div class="htabs" id="htabs" style="display:none">
    <div class="htab on" data-t="all" onclick="switchCat('all',this)">üî• –í—Å–µ</div>
    <div class="htab" data-t="games" onclick="switchCat('games',this)">üéÆ –ò–≥—Ä—ã</div>
    <div class="htab" data-t="ai" onclick="switchCat('ai',this)">ü§ñ AI</div>
    <div class="htab" data-t="stream" onclick="switchCat('stream',this)">üéµ –ú—É–∑—ã–∫–∞</div>
  </div>
</div>

<!-- HOME -->
<div class="page on" id="page-home">
  <div class="hero au">
    <div class="hero-tag">üî• –°–ö–ò–î–ö–ò –î–û 35%</div>
    <h2>–ò–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞<br>–∏ –ø–æ–¥–ø–∏—Å–∫–∏</h2>
    <p>–û–ø–ª–∞—Ç–∞ –°–ë–ü –∏ –∫–∞—Ä—Ç–æ–π –†–§ ¬∑ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –≤—ã–¥–∞—á–∞ ¬∑ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7</p>
    <div class="hero-chips">
      <div class="chip">üí≥ –°–ë–ü</div><div class="chip">üè¶ –ö–∞—Ä—Ç–∞ –†–§</div>
      <div class="chip">‚ö° –ê–≤—Ç–æ–≤—ã–¥–∞—á–∞</div><div class="chip">üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ</div>
    </div>
  </div>
  <div class="home-stats au">
    <div class="hstat"><div class="hstat-val">500+</div><div class="hstat-lbl">–ó–∞–∫–∞–∑–æ–≤</div></div>
    <div class="hstat"><div class="hstat-val">4.9‚òÖ</div><div class="hstat-lbl">–†–µ–π—Ç–∏–Ω–≥</div></div>
    <div class="hstat"><div class="hstat-val">24/7</div><div class="hstat-lbl">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</div></div>
  </div>
  <div class="ph14 mt14 au"><div class="sec-title">üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã</div></div>
  <div class="feat-scroll au" id="featScroll"></div>
  <div class="hiw au" style="margin-top:14px">
    <div class="hiw-title">‚ö° –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</div>
    <div class="hiw-step"><div class="step-num">1</div><div class="step-txt"><b>–í—ã–±–µ—Ä–∏ —Ç–æ–≤–∞—Ä</b> –≤ –∫–∞—Ç–∞–ª–æ–≥–µ –∏ –Ω–∞–∂–º–∏ ¬´–ö—É–ø–∏—Ç—å¬ª –∏–ª–∏ ¬´–í –∫–æ—Ä–∑–∏–Ω—É¬ª</div></div>
    <div class="hiw-step"><div class="step-num">2</div><div class="step-txt"><b>–û–ø–ª–∞—Ç–∏</b> —á–µ—Ä–µ–∑ –°–ë–ü –∏–ª–∏ –∫–∞—Ä—Ç—É –†–§</div></div>
    <div class="hiw-step"><div class="step-num">3</div><div class="step-txt"><b>–ü–æ–ª—É—á–∏ –∫–æ–¥</b> –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã</div></div>
  </div>
</div>

<!-- CATALOG -->
<div class="page" id="page-catalog">
  <div class="cat-page au">
    <div class="cat-page-title">üì¶ –ö–∞—Ç–∞–ª–æ–≥</div>
    <div id="catContent"></div>
  </div>
</div>

<!-- ITEMS -->
<div class="page" id="page-items">
  <div class="items-page au">
    <div class="back-btn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</div>
    <div id="itemsHdr"></div>
    <div class="prod-list" id="itemsList"></div>
  </div>
</div>

<!-- DETAIL -->
<div class="page" id="page-detail">
  <div id="detailContent"></div>
</div>

<!-- CART -->
<div class="page" id="page-cart">
  <div class="cart-page">
    <div class="cart-title">üõí –ö–æ—Ä–∑–∏–Ω–∞</div>
    <div id="cartContent"></div>
  </div>
</div>

<!-- PROFILE -->
<div class="page" id="page-profile">
  <div class="prof-page" id="profContent"></div>
</div>

<div class="bnav">
  <div class="bi on" id="bi-home" onclick="goPage('home')"><div class="bi-icon">üè†</div><div class="bi-lbl">–ì–ª–∞–≤–Ω–∞—è</div></div>
  <div class="bi" id="bi-catalog" onclick="goPage('catalog')"><div class="bi-icon">üì¶</div><div class="bi-lbl">–ö–∞—Ç–∞–ª–æ–≥</div></div>
  <div class="bi" id="bi-cart" onclick="goPage('cart')"><div class="bi-icon">üõí</div><div class="bi-lbl">–ö–æ—Ä–∑–∏–Ω–∞</div></div>
  <div class="bi" id="bi-profile" onclick="goPage('profile')"><div class="bi-icon">üë§</div><div class="bi-lbl">–ü—Ä–æ—Ñ–∏–ª—å</div></div>
</div>
<div class="toast" id="toast"></div>

<script>
const tg = window.Telegram?.WebApp;
if(tg){ tg.expand(); tg.setHeaderColor('#09090f'); tg.setBackgroundColor('#09090f'); }
const TG_USER = tg?.initDataUnsafe?.user || {first_name:'–ì–æ—Å—Ç—å',id:0};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –î–ê–ù–ù–´–ï
   –¶–µ–Ω—ã: 1 V-Bucks = 1.5 —Ä—É–± (—Å –º–∞—Ä–∂–µ–π)
   1000 vbucks = 1500‚ÇΩ –ø–æ –∫—É—Ä—Å—É, –Ω–æ —Å –º–∞—Ä–∂–æ–π ‚Äî 1500‚ÇΩ –ø—Ä–∏ —Ü–µ–Ω–µ 749‚ÇΩ
   –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–≤–æ–∏ —Ü–µ–Ω—ã –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –¥–∞—é—Ç —Ö–æ—Ä–æ—à—É—é –º–∞—Ä–∂—É
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const DATA = {
  games:[
    { key:'fortnite', name:'Fortnite', currency:'V-Bucks', emoji:'‚ö°', badge:'–•–ò–¢', btype:'bh',
      desc:'–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞ Fortnite. –¢—Ä–∞—Ç—å –Ω–∞ —Å–∫–∏–Ω—ã, —ç–º–æ—Ü–∏–∏, –±–æ–µ–≤–æ–π –ø—Ä–æ–ø—É—Å–∫.',
      items:[
        {id:101, name:'1 000 V-Bucks',  price:1500, old:1999, info:'‚âà 1 —Å–∫–∏–Ω –∏–ª–∏ —ç–º–æ—Ü–∏—è'},
        {id:102, name:'2 800 V-Bucks',  price:4200, old:5599, info:'–ë–æ–µ–≤–æ–π –ø—Ä–æ–ø—É—Å–∫ + —Å–∫–∏–Ω ¬∑ +300 –±–æ–Ω—É—Å–Ω—ã—Ö'},
        {id:103, name:'5 000 V-Bucks',  price:7500, old:9999, info:'–ë–æ–ª—å—à–æ–π –≤—ã–±–æ—Ä –∫–æ—Å–º–µ—Ç–∏–∫–∏ ¬∑ +500 –±–æ–Ω—É—Å–Ω—ã—Ö'},
        {id:104, name:'13 500 V-Bucks', price:20250,old:26999,info:'–ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π –ø–∞–∫ ¬∑ +500 –±–æ–Ω—É—Å–Ω—ã—Ö'},
      ]
    },
    { key:'brawl', name:'Brawl Stars', currency:'Gems', emoji:'üíé', badge:'', btype:'',
      desc:'–ö—Ä–∏—Å—Ç–∞–ª–ª—ã Brawl Stars. –¢—Ä–∞—Ç—å –Ω–∞ —Å–∫–∏–Ω—ã, Brawl Pass –∏ –±–æ–∫—Å—ã.',
      items:[
        {id:201, name:'80 Gems',  price:490,  old:649,  info:''},
        {id:202, name:'170 Gems', price:990,  old:1299, info:''},
        {id:203, name:'360 Gems', price:1990, old:2599, info:''},
        {id:204, name:'950 Gems', price:4990, old:6499, info:'–°–∞–º—ã–π –≤—ã–≥–æ–¥–Ω—ã–π –ø–∞–∫'},
      ]
    },
  ],
  ai:[
    { key:'chatgpt', name:'ChatGPT Plus', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'ü§ñ', badge:'–•–ò–¢', btype:'bh',
      desc:'GPT-4o, DALL-E 3, –∞–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤, –±–µ–∑ —Å—É—Ç–æ—á–Ω—ã—Ö –ª–∏–º–∏—Ç–æ–≤.',
      items:[{id:1001,name:'ChatGPT Plus ‚Äî 1 –º–µ—Å—è—Ü',price:1699,old:2099,info:'GPT-4o ¬∑ DALL-E 3 ¬∑ –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤'}]
    },
    { key:'claude', name:'Claude Pro', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üß†', badge:'', btype:'',
      desc:'Claude 3.5 Sonnet –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è.',
      items:[{id:1101,name:'Claude Pro ‚Äî 1 –º–µ—Å—è—Ü',price:1599,old:1999,info:'Claude 3.5 ¬∑ –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤'}]
    },
    { key:'midj', name:'Midjourney', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üé®', badge:'', btype:'',
      desc:'–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π AI. –õ—É—á—à–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞—Ä—Ç–∞ –∏ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π.',
      items:[
        {id:1201,name:'Midjourney Basic ‚Äî 1 –º–µ—Å',price:999,old:1299,info:'200 –≥–µ–Ω–µ—Ä–∞—Ü–∏–π ¬∑ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ'},
        {id:1202,name:'Midjourney Standard ‚Äî 1 –º–µ—Å',price:1799,old:2299,info:'–ë–µ–∑ –ª–∏–º–∏—Ç–∞ ¬∑ Relax —Ä–µ–∂–∏–º'},
      ]
    },
    { key:'grok', name:'Grok Premium', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'‚ú¶', badge:'NEW', btype:'bn',
      desc:'AI –æ—Ç xAI. Grok-2, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π Aurora, —Ä–µ–∂–∏–º DeepSearch.',
      items:[{id:1301,name:'Grok Premium ‚Äî 1 –º–µ—Å—è—Ü',price:1499,old:1899,info:'Grok-2 ¬∑ Aurora ¬∑ DeepSearch'}]
    },
    { key:'perp', name:'Perplexity Pro', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üîç', badge:'', btype:'',
      desc:'AI-–ø–æ–∏—Å–∫–æ–≤–∏–∫ —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.',
      items:[{id:1401,name:'Perplexity Pro ‚Äî 1 –º–µ—Å—è—Ü',price:1299,old:1699,info:'–ò–Ω—Ç–µ—Ä–Ω–µ—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ ¬∑ GPT-4o'}]
    },
    { key:'copilot', name:'GitHub Copilot', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üêô', badge:'', btype:'',
      desc:'AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –≤ VS Code, JetBrains –∏ –¥—Ä—É–≥–∏—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö.',
      items:[{id:1501,name:'GitHub Copilot ‚Äî 1 –º–µ—Å—è—Ü',price:899,old:1199,info:'VS Code ¬∑ JetBrains ¬∑ Neovim'}]
    },
    { key:'cursor', name:'Cursor Pro', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üñ±Ô∏è', badge:'NEW', btype:'bn',
      desc:'–†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞ —Å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º AI. –ü–∏—à–µ—Ç —Ü–µ–ª—ã–µ —Ñ–∞–π–ª—ã, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç, –æ–±—ä—è—Å–Ω—è–µ—Ç.',
      items:[{id:1601,name:'Cursor Pro ‚Äî 1 –º–µ—Å—è—Ü',price:1499,old:1999,info:'GPT-4o ¬∑ Claude ¬∑ –±–µ–∑ –ª–∏–º–∏—Ç–æ–≤'}]
    },
    { key:'canva', name:'Canva Pro', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'‚úèÔ∏è', badge:'', btype:'',
      desc:'–î–∏–∑–∞–π–Ω-—Ä–µ–¥–∞–∫—Ç–æ—Ä: –≤—Å–µ —à–∞–±–ª–æ–Ω—ã, —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞, Brand Kit, AI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã.',
      items:[
        {id:1701,name:'Canva Pro ‚Äî 1 –º–µ—Å—è—Ü',price:599,old:849,info:'–í—Å–µ —à–∞–±–ª–æ–Ω—ã ¬∑ AI ¬∑ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ–Ω–∞'},
        {id:1702,name:'Canva Pro ‚Äî 3 –º–µ—Å—è—Ü–∞',price:1499,old:2199,info:'–≠–∫–æ–Ω–æ–º–∏—è 32%'},
      ]
    },
    { key:'adobe', name:'Adobe Creative Cloud', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üÖ∞Ô∏è', badge:'', btype:'',
      desc:'Photoshop, Illustrator, Premiere Pro, After Effects –∏ –µ—â—ë 20+ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.',
      items:[{id:1801,name:'Adobe CC ‚Äî 1 –º–µ—Å—è—Ü',price:2499,old:3299,info:'20+ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ¬∑ –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞'}]
    },
  ],
  stream:[
    { key:'spotify', name:'Spotify Premium', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üéµ', badge:'', btype:'',
      desc:'–ú—É–∑—ã–∫–∞ –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã, –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –æ—Ñ—Ñ–ª–∞–π–Ω, –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∑–≤—É–∫–∞.',
      items:[
        {id:2001,name:'Spotify Premium ‚Äî 1 –º–µ—Å',price:299,old:399,info:'–ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã ¬∑ –æ—Ñ—Ñ–ª–∞–π–Ω ¬∑ –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ'},
        {id:2002,name:'Spotify Premium ‚Äî 3 –º–µ—Å',price:749,old:1049,info:'–≠–∫–æ–Ω–æ–º–∏—è 30%'},
      ]
    },
    { key:'yt', name:'YouTube Premium', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'‚ñ∂Ô∏è', badge:'–•–ò–¢', btype:'bh',
      desc:'YouTube –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã, —Ñ–æ–Ω–æ–≤–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∏ YouTube Music –≤ –ø–æ–¥–∞—Ä–æ–∫.',
      items:[
        {id:2101,name:'YouTube Premium ‚Äî 1 –º–µ—Å',price:349,old:499,info:'–ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã ¬∑ —Ñ–æ–Ω–æ–≤—ã–π —Ä–µ–∂–∏–º ¬∑ YT Music'},
        {id:2102,name:'YouTube Premium ‚Äî 3 –º–µ—Å',price:899,old:1349,info:'–≠–∫–æ–Ω–æ–º–∏—è 34%'},
      ]
    },
    { key:'applemus', name:'Apple Music', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üçé', badge:'', btype:'',
      desc:'100 –º–ª–Ω —Ç—Ä–µ–∫–æ–≤, Dolby Atmos, –æ—Ñ—Ñ–ª–∞–π–Ω –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.',
      items:[
        {id:2201,name:'Apple Music ‚Äî 1 –º–µ—Å',price:299,old:399,info:'100–ú —Ç—Ä–µ–∫–æ–≤ ¬∑ Dolby Atmos ¬∑ –æ—Ñ—Ñ–ª–∞–π–Ω'},
        {id:2202,name:'Apple Music ‚Äî 3 –º–µ—Å',price:749,old:1049,info:'–≠–∫–æ–Ω–æ–º–∏—è 28%'},
      ]
    },
    { key:'tidal', name:'Tidal HiFi', currency:'–ü–æ–¥–ø–∏—Å–∫–∞', emoji:'üåä', badge:'NEW', btype:'bn',
      desc:'–ú—É–∑—ã–∫–∞ –±–µ–∑ –ø–æ—Ç–µ—Ä—å (Lossless) –∏ Dolby Atmos. –î–ª—è –Ω–∞—Å—Ç–æ—è—â–∏—Ö –º–µ–ª–æ–º–∞–Ω–æ–≤.',
      items:[
        {id:2301,name:'Tidal HiFi ‚Äî 1 –º–µ—Å',price:449,old:599,info:'Lossless ¬∑ Dolby Atmos ¬∑ 100–ú —Ç—Ä–µ–∫–æ–≤'},
        {id:2302,name:'Tidal HiFi ‚Äî 3 –º–µ—Å',price:1099,old:1599,info:'–≠–∫–æ–Ω–æ–º–∏—è 27%'},
      ]
    },
  ]
};

/* flat maps */
const ITEM_MAP={}, GAME_MAP={};
Object.values(DATA).flat().forEach(g=>{
  GAME_MAP[g.key]=g;
  g.items.forEach(it=>{ it._g=g; ITEM_MAP[it.id]=it; });
});
const ALL_ITEMS=Object.values(ITEM_MAP);

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –ü–†–û–ú–û–ö–û–î–´
   –•—Ä–∞–Ω—è—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ ‚Äî —Ä–µ–∞–ª—å–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã
   –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ –±–æ—Ç–∞ —á–µ—Ä–µ–∑ sendData/initData
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
// –ü—Ä–æ–º–æ–∫–æ–¥—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ –∫–ª–∏–∫–µ—Ä–∞ –∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –∑–¥–µ—Å—å.
// –§–æ—Ä–º–∞—Ç: { code: 'CLICK-ABC123', type: 'percent'|'fixed', value: 10 }
// –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥—ë—Ç —á–µ—Ä–µ–∑ –±–æ—Ç –ø—Ä–∏ –æ–ø–ª–∞—Ç–µ.
let appliedPromo = null;

function calcDiscount(subtotal) {
  if (!appliedPromo) return 0;
  if (appliedPromo.type === 'percent') return Math.round(subtotal * appliedPromo.value / 100);
  if (appliedPromo.type === 'fixed') return Math.min(appliedPromo.value, subtotal);
  return 0;
}

async function applyPromo(code, resultEl, priceEl) {
  code = code.trim().toUpperCase();
  if (!code) return;

  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –±–æ—Ç—É –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
  if (tg) {
    tg.sendData(JSON.stringify({ action: 'check_promo', code }));
  }

  // –°–∏–º—É–ª—è—Ü–∏—è –¥–ª—è demo ‚Äî –≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –æ—Ç–≤–µ—Ç –ø—Ä–∏–¥—ë—Ç —á–µ—Ä–µ–∑ –±–æ—Ç–∞
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç CLICK-XXXXX (–∏–∑ –∫–ª–∏–∫–µ—Ä–∞)
  if (code.startsWith('CLICK-') && code.length >= 10) {
    appliedPromo = { code, type: 'percent', value: 10 };
    resultEl.textContent = '‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω ‚Äî —Å–∫–∏–¥–∫–∞ 10%!';
    resultEl.className = 'promo-result promo-ok';
    resultEl.style.display = 'block';
    if (priceEl) updateFinalPrice(priceEl, currentDetailId);
    updateCartTotal();
    showToast('üéâ –ü—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!');
  } else if (code === 'GAMESTORE10') {
    appliedPromo = { code, type: 'percent', value: 10 };
    resultEl.textContent = '‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–∏–º–µ–Ω—ë–Ω ‚Äî —Å–∫–∏–¥–∫–∞ 10%!';
    resultEl.className = 'promo-result promo-ok';
    resultEl.style.display = 'block';
    if (priceEl) updateFinalPrice(priceEl, currentDetailId);
    updateCartTotal();
    showToast('üéâ –ü—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!');
  } else {
    appliedPromo = null;
    resultEl.textContent = '‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –∏—Å—Ç—ë–∫—à–∏–π –ø—Ä–æ–º–æ–∫–æ–¥';
    resultEl.className = 'promo-result promo-err';
    resultEl.style.display = 'block';
  }
}

function updateFinalPrice(el, itemId) {
  const it = ITEM_MAP[itemId]; if (!it || !el) return;
  const disc = calcDiscount(it.price);
  const final = it.price - disc;
  el.textContent = fmt(final) + '‚ÇΩ';
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –ö–û–†–ó–ò–ù–ê
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let cart = [];
function cartTotal(){ return cart.reduce((s,i)=>s+i.price,0); }
function updBadge(){
  const el=document.getElementById('cbadge');
  cart.length?(el.textContent=cart.length,el.classList.add('v')):el.classList.remove('v');
}
function inCart(id){ return cart.some(c=>c.id===id); }

function addCart(id, fromDetail=false){
  const it=ITEM_MAP[id]; if(!it) return;
  if(inCart(id)){ showToast('–£–∂–µ –≤ –∫–æ—Ä–∑–∏–Ω–µ!','#f59e0b'); return; }
  cart.push({id,name:it.name,price:it.price,emoji:it._g.emoji,game:it._g.name});
  updBadge();
  showToast('üõí –î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É!');
  // update button state
  const btn = document.getElementById('cartbtn-'+id);
  if(btn){ btn.textContent='‚úÖ'; btn.classList.add('added'); }
  if(fromDetail){
    const dBtn = document.getElementById('det-cartbtn');
    if(dBtn){ dBtn.textContent='‚úÖ'; dBtn.classList.add('added'); }
  }
}
function rmCart(i){ cart.splice(i,1); updBadge(); renderCart(); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TOAST
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let tt;
function showToast(m,c='#10b981'){
  const el=document.getElementById('toast');
  el.textContent=m;el.style.background=c;el.classList.add('v');
  clearTimeout(tt);tt=setTimeout(()=>el.classList.remove('v'),2200);
}

/* ‚îÄ‚îÄ HELPERS ‚îÄ‚îÄ */
function fmt(n){ return n.toLocaleString('ru'); }
function disc(p,o){ return Math.round((1-p/o)*100); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –ö–ê–¢–ê–õ–û–ì
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let activeCat='all';
function switchCat(cat,el){
  activeCat=cat;
  document.querySelectorAll('.htab').forEach(t=>t.classList.remove('on'));
  if(el) el.classList.add('on');
  renderCatalog();
}

function gcHtml(g){
  return `<div class="gcard" onclick="openItems('${g.key}')">
    ${g.badge?`<div class="gc-badge ${g.btype}">${g.badge}</div>`:''}
    <span class="gc-emoji">${g.emoji}</span>
    <div class="gc-name">${g.name}</div>
    <div class="gc-sub">${g.currency}</div>
  </div>`;
}

function renderCatalog(){
  const el=document.getElementById('catContent');
  const cats=activeCat==='all'
    ?[{label:'üéÆ –ò–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞',list:DATA.games},{label:'ü§ñ AI –ø–æ–¥–ø–∏—Å–∫–∏',list:DATA.ai},{label:'üéµ –ú—É–∑—ã–∫–∞',list:DATA.stream}]
    :activeCat==='games'?[{label:'üéÆ –ò–≥—Ä–æ–≤–∞—è –≤–∞–ª—é—Ç–∞',list:DATA.games}]
    :activeCat==='ai'?[{label:'ü§ñ AI –ø–æ–¥–ø–∏—Å–∫–∏',list:DATA.ai}]
    :[{label:'üéµ –ú—É–∑—ã–∫–∞',list:DATA.stream}];
  el.innerHTML=cats.map(c=>`
    <div class="cat-block">
      <div class="cat-bhead">
        <div class="cat-btitle">${c.label}</div>
        <div class="cat-bcnt">${c.list.length} –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</div>
      </div>
      <div class="grid2">${c.list.map(gcHtml).join('')}</div>
    </div>`).join('');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –°–ü–ò–°–û–ö –¢–û–í–ê–†–û–í
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let prevPage='catalog';
function openItems(key){
  const g=GAME_MAP[key]; if(!g) return;
  prevPage=currentPage;
  document.getElementById('itemsHdr').innerHTML=`
    <div class="items-hdr">
      <span class="ih-emoji">${g.emoji}</span>
      <div class="ih-name">${g.name}</div>
      <div class="ih-desc">${g.desc}</div>
    </div>`;
  document.getElementById('itemsList').innerHTML=g.items.map(it=>{
    const d=disc(it.price,it.old);
    const inC=inCart(it.id);
    return `<div class="prow">
      <div class="prow-top">
        <div class="pr-left">
          <div class="pr-name">${it.name}</div>
          ${it.info?`<div class="pr-info">${it.info}</div>`:''}
        </div>
        <div class="pr-right">
          <div class="pr-price">${fmt(it.price)}‚ÇΩ</div>
          <div class="pr-old">${fmt(it.old)}‚ÇΩ</div>
          <div class="pr-disc">‚àí${d}%</div>
        </div>
      </div>
      <div class="prow-btns">
        <button class="btn-buy" onclick="openDetail(${it.id})">–ö—É–ø–∏—Ç—å</button>
        <button class="btn-cart ${inC?'added':''}" id="cartbtn-${it.id}" onclick="addCart(${it.id})">
          ${inC?'‚úÖ':'üõí'}
        </button>
      </div>
    </div>`;
  }).join('');
  goPage('items');
}

function goBack(){ goPage(prevPage); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –î–ï–¢–ê–õ–¨–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let currentDetailId=null, selPay='sbp';

function openDetail(id){
  const it=ITEM_MAP[id]; if(!it) return;
  const g=it._g; const d=disc(it.price,it.old);
  currentDetailId=id; appliedPromo=null;
  const inC=inCart(id);

  prevPage=currentPage;
  document.getElementById('detailContent').innerHTML=`
  <div class="au">
    <div class="det-head">
      <div class="back-btn" onclick="goBack()">‚Üê –ù–∞–∑–∞–¥</div>
      <span class="det-emoji">${g.emoji}</span>
      <div class="det-name">${it.name}</div>
      <div class="det-cat">${g.name} ¬∑ ${g.currency}</div>
      <div class="price-row">
        <div class="det-price">${fmt(it.price)}‚ÇΩ</div>
        <div class="det-old">${fmt(it.old)}‚ÇΩ</div>
        <div class="det-disc">‚àí${d}%</div>
      </div>
    </div>
    <div class="det-body">
      ${it.info?`<div class="feats"><div class="frow"><span class="ico">üìã</span><span>${it.info}</span></div></div>`:''}
      <div class="feats">
        <div class="frow"><span class="ico">‚ö°</span><span>–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∞–≤—Ç–æ–≤—ã–¥–∞—á–∞ –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã</span></div>
        <div class="frow"><span class="ico">üîí</span><span>–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Paypalich</span></div>
        <div class="frow"><span class="ico">üí¨</span><span>–ü–æ–¥–¥–µ—Ä–∂–∫–∞ 24/7 ‚Äî –æ—Ç–≤–µ—Ç–∏–º –∑–∞ 30 –º–∏–Ω—É—Ç</span></div>
        <div class="frow"><span class="ico">‚úÖ</span><span>–ì–∞—Ä–∞–Ω—Ç–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –ø—Ä–∏ –ª—é–±—ã—Ö –ø—Ä–æ–±–ª–µ–º–∞—Ö</span></div>
      </div>
      <div class="promo-block">
        <div class="promo-title">üéü –ü—Ä–æ–º–æ–∫–æ–¥</div>
        <div class="promo-row">
          <input class="promo-input" id="det-promo" placeholder="–í–≤–µ–¥–∏ –ø—Ä–æ–º–æ–∫–æ–¥ (–Ω–∞–ø—Ä. CLICK-XXXXX)" maxlength="20">
          <button class="promo-apply" onclick="applyPromo(document.getElementById('det-promo').value, document.getElementById('det-promo-res'), document.getElementById('det-final-val'))">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
        </div>
        <div class="promo-result" id="det-promo-res"></div>
      </div>
      <div class="pay-opts">
        <div class="pay-title">üí≥ –°–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</div>
        <div class="pay-methods">
          <div class="pay-method sel" id="pm-sbp" onclick="selPayMethod('sbp')"><div class="pay-ico">üì≤</div><div>–°–ë–ü</div></div>
          <div class="pay-method" id="pm-card" onclick="selPayMethod('card')"><div class="pay-ico">üí≥</div><div>–ö–∞—Ä—Ç–∞ –†–§</div></div>
        </div>
      </div>
      <div class="final-price">
        <div class="fp-lbl">–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</div>
        <div class="fp-val" id="det-final-val">${fmt(it.price)}‚ÇΩ</div>
      </div>
      <div class="det-btns">
        <button class="buy-btn" onclick="doBuy(${id})">–û–ü–õ–ê–¢–ò–¢–¨</button>
        <button class="cart-add-btn ${inC?'added':''}" id="det-cartbtn" onclick="addCart(${id},true)">${inC?'‚úÖ':'üõí'}</button>
      </div>
    </div>
  </div>`;
  goPage('detail');
}

function selPayMethod(m){
  selPay=m;
  document.querySelectorAll('.pay-method').forEach(el=>el.classList.remove('sel'));
  document.getElementById('pm-'+m)?.classList.add('sel');
}

function doBuy(id){
  const it=ITEM_MAP[id]; if(!it) return;
  const discAmt=calcDiscount(it.price);
  const finalPrice=it.price-discAmt;
  if(tg){
    tg.sendData(JSON.stringify({
      action:'buy', item_id:id, item_name:it.name,
      price:finalPrice, original_price:it.price,
      promo:appliedPromo?.code||null, pay_method:selPay
    }));
  }
  showToast('üîÑ –°–æ–∑–¥–∞—ë–º —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É...');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –ö–û–†–ó–ò–ù–ê –†–ï–ù–î–ï–†
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function updateCartTotal(){
  const totEl=document.getElementById('cart-total-block');
  if(!totEl||!cart.length) return;
  const sub=cartTotal();
  const discAmt=calcDiscount(sub);
  const final=sub-discAmt;
  let discRow=discAmt>0?`<div class="ct-row"><div class="ct-lbl">–°–∫–∏–¥–∫–∞ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É</div><div class="ct-val" style="color:var(--green)">‚àí${fmt(discAmt)}‚ÇΩ</div></div>`:'';
  totEl.innerHTML=`<div class="ct-rows">
    <div class="ct-row"><div class="ct-lbl">–¢–æ–≤–∞—Ä–æ–≤: ${cart.length}</div><div class="ct-val">${fmt(sub)}‚ÇΩ</div></div>
    ${discRow}
  </div>
  <div class="ct-total-row">
    <div class="ct-total-lbl">–ò—Ç–æ–≥–æ:</div>
    <div class="ct-total-val">${fmt(final)}‚ÇΩ</div>
  </div>`;
}

function renderCart(){
  const el=document.getElementById('cartContent');
  if(!cart.length){
    el.innerHTML=`<div class="cart-empty"><div class="cart-empty-ico">üõí</div><p>–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞ ‚Äî –¥–æ–±–∞–≤—å —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p></div>`;
    return;
  }
  const sub=cartTotal(); const discAmt=calcDiscount(sub); const final=sub-discAmt;
  let discRow=discAmt>0?`<div class="ct-row"><div class="ct-lbl">–°–∫–∏–¥–∫–∞ –ø–æ –ø—Ä–æ–º–æ–∫–æ–¥—É</div><div class="ct-val" style="color:var(--green)">‚àí${fmt(discAmt)}‚ÇΩ</div></div>`:'';

  el.innerHTML=cart.map((item,i)=>`
    <div class="ci">
      <div class="ci-top">
        <div class="ci-emoji">${item.emoji}</div>
        <div class="ci-info">
          <div class="ci-name">${item.name}</div>
          <div class="ci-price">${fmt(item.price)}‚ÇΩ</div>
        </div>
        <div class="ci-del" onclick="rmCart(${i})">‚úï</div>
      </div>
      <div class="ci-btns">
        <button class="ci-buy" onclick="buyCartItem(${item.id})">‚ö° –ö—É–ø–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ</button>
      </div>
    </div>`).join('')+`
  <div class="cart-promo">
    <div class="cart-promo-title">üéü –ü—Ä–æ–º–æ–∫–æ–¥</div>
    <div class="promo-row">
      <input class="promo-input" id="cart-promo" placeholder="CLICK-XXXXX –∏–ª–∏ –¥—Ä—É–≥–æ–π –∫–æ–¥" maxlength="20" value="${appliedPromo?.code||''}">
      <button class="promo-apply" onclick="applyPromo(document.getElementById('cart-promo').value, document.getElementById('cart-promo-res'), null)">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
    </div>
    <div class="promo-result ${appliedPromo?'promo-ok':''}" id="cart-promo-res" style="${appliedPromo?'display:block':''}">
      ${appliedPromo?`‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ ${appliedPromo.code} –ø—Ä–∏–º–µ–Ω—ë–Ω ‚Äî —Å–∫–∏–¥–∫–∞ ${appliedPromo.value}${appliedPromo.type==='percent'?'%':'‚ÇΩ'}!`:''}
    </div>
  </div>
  <div class="cart-tot" id="cart-total-block">
    <div class="ct-rows">
      <div class="ct-row"><div class="ct-lbl">–¢–æ–≤–∞—Ä–æ–≤: ${cart.length}</div><div class="ct-val">${fmt(sub)}‚ÇΩ</div></div>
      ${discRow}
    </div>
    <div class="ct-total-row">
      <div class="ct-total-lbl">–ò—Ç–æ–≥–æ:</div>
      <div class="ct-total-val">${fmt(final)}‚ÇΩ</div>
    </div>
  </div>
  <div class="pay-info">üì≤ –û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ Paypalich ‚Äî –°–ë–ü –∏–ª–∏ –∫–∞—Ä—Ç–∞ –†–§</div>
  <button class="checkout-btn" onclick="checkoutCart()">–û–ü–õ–ê–¢–ò–¢–¨ ${fmt(final)}‚ÇΩ</button>`;
}

function buyCartItem(id){
  // –û—Ç–∫—Ä—ã–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ç–æ–≤–∞—Ä–∞ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –ø–æ–∫—É–ø–∫–∏
  openDetail(id);
}

function checkoutCart(){
  if(!cart.length) return;
  const sub=cartTotal();
  const discAmt=calcDiscount(sub);
  const final=sub-discAmt;
  if(tg){
    tg.sendData(JSON.stringify({
      action:'checkout_cart', cart, total:final,
      original_total:sub, promo:appliedPromo?.code||null
    }));
  }
  showToast('üîÑ –°–æ–∑–¥–∞—ë–º —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É...');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –ü–†–û–§–ò–õ–¨
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderProfile(){
  // –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞ —Å @gamestoren_bot
  const botUsername='gamestoren_bot';
  const ref=`https://t.me/${botUsername}?start=REF${TG_USER.id}`;
  document.getElementById('profContent').innerHTML=`
  <div class="prof-card au"><div class="prof-ava">üë§</div>
    <div class="prof-name">${TG_USER.first_name}</div>
    <div class="prof-status">ü•â –ù–æ–≤–∏—á–æ–∫</div></div>
  <div class="stats3 au">
    <div class="sbox"><div class="sb-v">0</div><div class="sb-l">–ó–∞–∫–∞–∑–æ–≤</div></div>
    <div class="sbox"><div class="sb-v">0‚ÇΩ</div><div class="sb-l">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</div></div>
    <div class="sbox"><div class="sb-v">0</div><div class="sb-l">–†–µ—Ñ–µ—Ä–∞–ª–æ–≤</div></div>
  </div>
  <div class="ref-block au">
    <div class="ref-ttl">üë• –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</div>
    <div class="ref-desc">–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –≤ –º–∞–≥–∞–∑–∏–Ω ‚Äî –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –±–æ–Ω—É—Å—ã –∑–∞ –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è!</div>
    <div class="ref-link-row" onclick="copyRef('${ref}')">
      <div class="ref-link-txt">${ref}</div>
      <button class="ref-copy">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>
  </div>
  <div class="sec-title au" style="margin:12px 14px 10px">üì¶ –ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</div>
  <div class="empty-s au">–ó–∞–∫–∞–∑–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç üéÆ</div>`;
}
function copyRef(link){ navigator.clipboard?.writeText(link); showToast('üîó –°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!'); }

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FEATURED
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function renderFeatured(){
  const picks=[ITEM_MAP[102],ITEM_MAP[1001],ITEM_MAP[204],ITEM_MAP[2101],ITEM_MAP[1101],ITEM_MAP[2001]].filter(Boolean);
  document.getElementById('featScroll').innerHTML=picks.map(it=>`
    <div class="fc" onclick="openDetail(${it.id})">
      <span class="fc-emoji">${it._g.emoji}</span>
      <div class="fc-name">${it.name}</div>
      <div class="fc-price">${fmt(it.price)}‚ÇΩ</div>
    </div>`).join('');
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   –ù–ê–í–ò–ì–ê–¶–ò–Ø
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
let currentPage='home';
function goPage(name){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('on'));
  document.querySelectorAll('.bi').forEach(b=>b.classList.remove('on'));
  document.getElementById('page-'+name).classList.add('on');
  const bi=document.getElementById('bi-'+name); if(bi) bi.classList.add('on');
  document.getElementById('htabs').style.display=name==='catalog'?'flex':'none';
  if(name==='cart') renderCart();
  if(name==='profile') renderProfile();
  if(name==='catalog') renderCatalog();
  currentPage=name;
  window.scrollTo(0,0);
}

/* ‚îÄ‚îÄ INIT ‚îÄ‚îÄ */
renderFeatured(); updBadge();
</script>
</body>
</html>
